
#
# ASIO
#
add_library(asio INTERFACE)
target_compile_options(asio INTERFACE -isystem${CMAKE_CURRENT_SOURCE_DIR}/asio/asio/include)
target_compile_definitions(asio INTERFACE
        ASIO_STANDALONE
        ASIO_HEADER_ONLY
        ASIO_NO_TYPEID
        ASIO_DISABLE_HANDLER_TYPE_REQUIREMENTS
        ASIO_NO_DEPRECATED
)

#
# SDL3
#
set(SDL_INSTALL OFF)
set(BUILD_SHARED_LIBS OFF)
set(SDL_INSTALL_DOCS OFF)
set(SDL_INSTALL_CPACK OFF)

set(SDL_DBUS OFF)
set(SDL_IBUS OFF)
set(SDL_LIBUDEV OFF)
set(SDL_HIDAPI OFF)
set(SDL_HIDAPI_JOYSTICK OFF)

set(SDL_OPENGL ON)
set(SDL_OPENGLES ON)

set(SDL_VULKAN OFF)

set(SDL_KMSDRM OFF)
set(SDL_KMSDRM_SHARED OFF)

set(SDL_X11 ON)
if (SDL_X11)
    set(SDL_X11_SHARED ON)
    set(SDL_X11_XCB ON)
    set(SDL_X11_XCB_SHARED ON)
endif ()

set(SDL_WAYLAND ON)
if (SDL_WAYLAND)
    set(SDL_WAYLAND_SHARED ON)
    set(SDL_WAYLAND_LIBDECOR ON)
    set(SDL_WAYLAND_LIBDECOR_SHARED ON)
endif ()

if (NOT SDL_X11 AND NOT SDL_WAYLAND)
    set(SDL_UNIX_CONSOLE_BUILD ON)
else ()
    set(SDL_UNIX_CONSOLE_BUILD OFF)
endif ()

set(SDL_PULSEAUDIO OFF)
set(SDL_OFFSCREEN OFF)
set(SDL_DISKAUDIO OFF)
set(SDL_DUMMYAUDIO OFF)
set(SDL_DUMMYCAMERA OFF)
set(SDL_DUMMYVIDEO OFF)
set(SDL_ALSA ON)
set(SDL_LIBC ON)

add_subdirectory(SDL3)

if (ENABLE_LTO AND IPO_SUPPORT_RESULT)
    set_property(TARGET SDL3-static PROPERTY INTERPROCEDURAL_OPTIMIZATION TRUE)
endif ()
